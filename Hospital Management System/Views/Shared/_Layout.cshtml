<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Management System</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link href="~/Content/Site.css" rel="stylesheet" />
    <script src="~/Scripts/modernizr-2.8.3.js"></script>
    <script src="//cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <link href="//cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css" rel="stylesheet" />

</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                @Html.ActionLink("Hospital Management System", "Index", "Patient", new { area = "" }, new { @class = "navbar-brand" })
            </div>
        </div>
    </div>
    
    <div class="container body-content">
        <div class="modal fade" id="modalForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header text-center">
                        <h4 class="modal-title w-100 font-weight-bold">Add New Patient</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body mx-3">
                        @model HospitalManagementLibrary.PatientModel
                        <form id="myForm">
                            @using (Html.BeginForm())
                            {
                                @Html.AntiForgeryToken()
                                <div class="form-horizontal">

                                    <hr />
                                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                    <div class="form-group">
                                        @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-5">
                                            @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.Age, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-5">
                                            @Html.EditorFor(model => model.Age, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.Age, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.Gender, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-5">
                                            <select class="form-control" name="Gender" id="Gender">
                                                <option value="Select">Select</option>
                                                <option value="Male">Male</option>
                                                <option value="Female">Female</option>
                                                <option value="Other">Other</option>

                                            </select>

                                            @Html.ValidationMessageFor(model => model.Gender, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.dateTime, "Date", htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-5">
                                            @Html.EditorFor(model => model.dateTime, new { htmlAttributes = new { @type = "date", @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.dateTime, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="control-label col-md-2"><text></text></div>
                                        <div class="col-md-6">
                                            <div class="checkbox col-md-7">
                                                @Html.EditorFor(model => model.InPatient)<b>In-Patient</b>
                                                @Html.ValidationMessageFor(model => model.InPatient, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            }
                            <div class="modal-footer d-flex justify-content-center">
                                <a href="#" class="btn btn-primary" data-dismiss="modal">Cancel</a>

                                <input type="submit" value="Create" class="btn btn-success" id="btnCreate" />

                            </div>
                        </form>
                    </div>
                    
                   
                </div>
            </div>
        </div>

        @*<div class="text-center">
            <button type="button" class="btn btn-success btn-rounded mb-4" data-toggle="modal" data-target="#modalForm" data-url="Url.Action("Create")">
                Add New Patient
            </button>
        </div>*@
        <div>
        @RenderBody()</div>
        <br />
        <button onclick="myFunction()">Reading mode</button>
        <hr />
        <footer>

            <p>&copy; @DateTime.Now.Year - Hospital Management System</p>

        </footer>
    </div>

    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script>

        function myFunction() {
            var element = document.body;
            element.classList.toggle("dark-mode");

        }</script>
    <script>
        $(document).ready(function () {
            $('#btnCreate').click(function () {
                var myFormData = $("#myForm").serialize();
                $.ajax({
                    type: "POST",
                    url:"/Patient/Create",
                    data: myFormData,
                    success: function () {
                        
                        $('#PatientTable').DataTable().ajax.reload();
                        $("#modalForm").modal("hide");
                        $('#modalForm form')[0].reset();
                    }
                })
            })
            
        })
    </script>
</body>
</html>